<Page x:ConnectionId='1'
    x:Name="BattlePageRoot"
    x:Class="MunchkinUWP.Pages.BattlePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:viewmodels="using:MunchkinUWP.Model"
    xmlns:converter="using:MunchkinUWP.UI.Converter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    NavigationCacheMode="Enabled"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Ressources/Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <converter:Texts x:Key="Texts"/>
            <converter:io_Bool x:Key="io_Bool"/>
            <converter:CurrentMunchkinConverter x:Key="CurrentMunchkinConverter"/>
            <DataTemplate x:Key="lstMunchkin"                                  >
                <Grid x:ConnectionId='2' Width="Auto" Style="{StaticResource OverviewGrid_Light}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock x:ConnectionId='3' Grid.ColumnSpan="2"                                      x:Name="NameDisplay" Style="{StaticResource h1LBlock}"/>
                    <TextBlock Grid.Column="0" Grid.Row="1" Style="{ThemeResource h2LBlock}" >
                            <Run x:ConnectionId='4'                                     FontWeight="Bold"/>
                            <Run Text="("/>
                            <Run x:ConnectionId='5'                                    />
                            <Run Text="+"/>
                            <Run x:ConnectionId='6'                                   />
                            <Run Text=")"/>
                    </TextBlock>
                </Grid>
            </DataTemplate>

        </ResourceDictionary>
    </Page.Resources>
    <Grid x:ConnectionId='7' x:Name="MainGrid">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:ConnectionId='8' x:Name="ReallySmallScreens">
                <VisualState x:ConnectionId='12' x:Name="MultilineState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowHeight="450" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="Strenghts1.Height" Value="*" />
                        <Setter Target="Strenghts3.Height" Value="*" />
                        <Setter Target="MunchkinStrength.(Grid.Row)" Value="2" />
                        <Setter Target="MonsterStrength.(Grid.Row)" Value="4" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:ConnectionId='13' x:Name="SinglelineState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowHeight="0" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="Strenghts1.Height" Value="0" />
                        <Setter Target="Strenghts3.Height" Value="0" />
                        <Setter Target="MonsterStrength.(Grid.Row)" Value="3" />
                        <Setter Target="MunchkinStrength.(Grid.Row)" Value="3" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:ConnectionId='9' x:Name="AdaptiveStates">
                <VisualState x:ConnectionId='10' x:Name="DesktopState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowHeight="800" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="MunchkinRow.Height" Value="*" />
                        <Setter Target="Munchkins.Visibility" Value="Visible" />
                        <Setter Target="BtnPlayer.Visibility" Value="Collapsed" />
                        <Setter Target="Munchkins2.Visibility" Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:ConnectionId='11' x:Name="MobileState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowHeight="0" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="MunchkinRow.Height" Value="*" />
                        <Setter Target="Munchkins.Visibility" Value="Collapsed" />
                        <Setter Target="BtnPlayer.Visibility" Value="Visible" />
                        <Setter Target="Munchkins2.Visibility" Value="Visible" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid x:ConnectionId='14' x:Name="BattleGrid" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="5,0,6,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition x:ConnectionId='19' Height="*" x:Name="MunchkinRow" MinHeight="80"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition x:ConnectionId='20' Height="*" MaxHeight="100" x:Name="Strenghts1"/>
                <RowDefinition Height="*" MaxHeight="150"/>
                <RowDefinition x:ConnectionId='21' Height="*" MaxHeight="100" x:Name="Strenghts3"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <GridView x:ConnectionId='22' x:Name="Munchkins" Grid.ColumnSpan="4"
                                             
                      SelectionMode="Multiple"                                    
                                                                            
                   ItemTemplate="{StaticResource lstMunchkin}">
                <GridView.ItemContainerStyle>
                    <Style TargetType="GridViewItem">
                        <Setter Property="Width" Value="Auto"/>
                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    </Style>
                </GridView.ItemContainerStyle>
            </GridView>
            <Button x:ConnectionId='23' Grid.ColumnSpan="4"
                    Style="{StaticResource h2BattleBtn}"
                    x:Uid="BtnPlayer"
                    x:Name="BtnPlayer"
                    >
                <Button.Flyout>
                    <Flyout>
                        <ListView x:ConnectionId='43' x:Name="Munchkins2"                          
                            SelectionMode="Multiple"                                    
                                                                                     
                            ItemTemplate="{StaticResource lstMunchkin}">
                            <ListView.ItemContainerStyle>
                                <Style TargetType="ListViewItem">
                                    <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                </Style>
                            </ListView.ItemContainerStyle>
                        </ListView>
                    </Flyout>
                </Button.Flyout>
            </Button>
            <ToggleButton x:ConnectionId='24'
                    Style="{StaticResource h2BattleToggleBtn}"
                    x:Uid="BtnLevel"
                                                                         
                    Grid.Row="1"
                    Grid.Column="0"/>
            <ToggleButton x:ConnectionId='25'
                    Style="{StaticResource h2BattleToggleBtn}"
                    x:Uid="BtnGear"
                                                                        
                    Grid.Row="1"
                    Grid.Column="1"/>
            <Button x:ConnectionId='26'
                    Style="{StaticResource h2BattleBtn}"
                    x:Uid="BtnM"
                    x:Name="BtnM"
                    Content="+1"
                    Grid.Row="1"
                    Grid.Column="2"
                                      />
            <Button x:ConnectionId='27'
                    Style="{StaticResource h2BattleBtn}"
                    x:Uid="BtnL"
                    x:Name="BtnL"
                    Content="-1"
                    Grid.Row="1"
                    Grid.Column="3"
                                      />

            <!--Battle Strength-->
            <Viewbox x:ConnectionId='28' x:Name="MunchkinStrength" Grid.Row="2" Grid.ColumnSpan="4" HorizontalAlignment="Left">
            <TextBlock Style="{StaticResource h2BattleTextBlock}" Grid.Row="2"  Grid.ColumnSpan="4">
                <Run x:Uid="Munchkin"/>
                <Run x:ConnectionId='42'                                                                                                                             />
            </TextBlock>
            </Viewbox>
            <Viewbox x:ConnectionId='29' x:Name="Strength" Grid.Row="3" Grid.ColumnSpan="4">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="3" Grid.ColumnSpan="4">
                    <TextBlock x:ConnectionId='40'                                                       Style="{StaticResource h1BattleTextBlock}" x:Name="Munchkin_Power" Grid.Row="5" Grid.Column="1"                                />
                    <TextBlock Style="{StaticResource h2BattleTextBlock}" x:Uid="vs" Margin="20,0,20,0" Grid.Row="5" Grid.Column="2"/>
                    <TextBlock x:ConnectionId='41' Style="{StaticResource h1BattleTextBlock}" x:Name="Monster_Power"                                                      Grid.Row="5" Grid.Column="3"                                />
                </StackPanel>
            </Viewbox>
            <Viewbox x:ConnectionId='30' x:Name="MonsterStrength" Grid.Row="4" Grid.ColumnSpan="4" HorizontalAlignment="Right">
            <TextBlock x:ConnectionId='39' Style="{StaticResource h2BattleTextBlock}" x:Name="MonsterName" x:Uid="Monster" Grid.Row="4" Grid.ColumnSpan="4" TextAlignment="Right"/>
            </Viewbox>
            <!--Battle Strenths-->
            <Button x:ConnectionId='31'                            x:Name="MonsterPwrP1" Content="+1" Grid.Column="0" Grid.Row="5" Style="{StaticResource h2BattleBtn}"/>
            <Button x:ConnectionId='32'                            x:Name="MonsterPwrP3" Content="+3" Grid.Column="1" Grid.Row="5" Style="{StaticResource h2BattleBtn}"/>
            <Button x:ConnectionId='33'                            x:Name="MonsterPwrP5" Content="+5" Grid.Column="2" Grid.Row="5" Style="{StaticResource h2BattleBtn}"/>
            <Button x:ConnectionId='34'                             x:Name="MonsterPwrP10" Content="+10" Grid.Column="3" Grid.Row="5" Style="{StaticResource h2BattleBtn}"/>
            <Button x:ConnectionId='35'                            x:Name="MonsterPwrM1" Content="-1" Grid.Column="0" Grid.Row="6" Style="{StaticResource h2BattleBtn}"/>
            <Button x:ConnectionId='36'                            x:Name="MonsterPwrM3" Content="-3" Grid.Column="1" Grid.Row="6" Style="{StaticResource h2BattleBtn}"/>
            <Button x:ConnectionId='37'                            x:Name="MonsterPwrM5" Content="-5" Grid.Column="2" Grid.Row="6" Style="{StaticResource h2BattleBtn}"/>
            <Button x:ConnectionId='38'                             x:Name="MonsterPwrM10" Content="-10" Grid.Column="3" Grid.Row="6" Style="{StaticResource h2BattleBtn}"/>

        </Grid>
        <!--</ScrollViewer>-->
        <CommandBar x:ConnectionId='15' x:Name="CommandbarBattle" Grid.Row="1" Grid.Column="1">
            <AppBarButton x:ConnectionId='16' Name="BtnBack" x:Uid="BtnBack" Icon="Back"               />
            <AppBarButton x:ConnectionId='17' Name="BtnReset" x:Uid="BtnReset" Icon="Refresh"                       />
            <AppBarButton x:ConnectionId='18' Name="BtnRandom2" x:Uid="BtnRandom" Content="&#x2682;"                   />
        </CommandBar>

    </Grid>

</Page>

